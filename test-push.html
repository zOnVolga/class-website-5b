<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-section h3 {
            color: #555;
            margin-top: 0;
        }
        button {
            margin: 5px;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .primary {
            background-color: #007bff;
            color: white;
        }
        .primary:hover {
            background-color: #0056b3;
        }
        .secondary {
            background-color: #6c757d;
            color: white;
        }
        .secondary:hover {
            background-color: #545b62;
        }
        .success {
            background-color: #28a745;
            color: white;
        }
        .danger {
            background-color: #dc3545;
            color: white;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
        }
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        pre {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
        .log {
            max-height: 200px;
            overflow-y: auto;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîî –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h1>
        
        <div class="test-section">
            <h3>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h3>
            <button onclick="checkSupport()" class="primary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É</button>
            <div id="support-status"></div>
        </div>

        <div class="test-section">
            <h3>2. –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
            <button onclick="requestPermission()" class="primary" id="permission-btn">–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ</button>
            <div id="permission-status"></div>
        </div>

        <div class="test-section">
            <h3>3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker</h3>
            <button onclick="registerServiceWorker()" class="primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Service Worker</button>
            <div id="sw-status"></div>
        </div>

        <div class="test-section">
            <h3>4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π</h3>
            <button onclick="subscribe()" class="success" id="subscribe-btn">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
            <button onclick="unsubscribe()" class="danger" id="unsubscribe-btn">–û—Ç–ø–∏—Å–∞—Ç—å—Å—è</button>
            <button onclick="checkSubscription()" class="secondary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
            <div id="subscription-status"></div>
        </div>

        <div class="test-section">
            <h3>5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
            <button onclick="sendTestNotification()" class="primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
            <button onclick="sendCustomNotification()" class="secondary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
            <div id="notification-status"></div>
        </div>

        <div class="test-section">
            <h3>6. –ö–æ–Ω—Å–æ–ª—å –ª–æ–≥–æ–≤</h3>
            <div id="console-log" class="log"></div>
            <button onclick="clearLog()" class="secondary">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
        </div>
    </div>

    <script>
        let registration = null;
        let subscription = null;

        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logDiv = document.getElementById('console-log');
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `<span style="color: #666;">[${timestamp}]</span> ${message}`;
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(`[Push Test] ${message}`);
        }

        function clearLog() {
            document.getElementById('console-log').innerHTML = '';
        }

        function showStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.className = `status ${type}`;
            element.innerHTML = message;
            element.style.display = 'block';
        }

        // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
        function checkSupport() {
            log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π...');
            
            const supported = 'serviceWorker' in navigator && 
                             'PushManager' in window && 
                             'Notification' in window;
            
            if (supported) {
                showStatus('support-status', '‚úÖ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è', 'success');
                log('Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è');
            } else {
                showStatus('support-status', '‚ùå Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è', 'error');
                log('Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è');
            }
            
            return supported;
        }

        // 2. –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
        async function requestPermission() {
            log('–ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è...');
            
            try {
                const permission = await Notification.requestPermission();
                
                switch (permission) {
                    case 'granted':
                        showStatus('permission-status', '‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ', 'success');
                        log('–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–æ');
                        break;
                    case 'denied':
                        showStatus('permission-status', '‚ùå –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ', 'error');
                        log('–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω–æ');
                        break;
                    case 'default':
                        showStatus('permission-status', '‚è≥ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—Ä–æ—à–µ–Ω–æ', 'warning');
                        log('–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –∑–∞–ø—Ä–æ—à–µ–Ω–æ');
                        break;
                }
                
                return permission;
            } catch (error) {
                showStatus('permission-status', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                log(`–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: ${error.message}`);
            }
        }

        // 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
        async function registerServiceWorker() {
            log('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker...');
            
            try {
                registration = await navigator.serviceWorker.register('/sw.js');
                showStatus('sw-status', '‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω', 'success');
                log(`Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ${registration.scope}`);
                
                // –û–∂–∏–¥–∞–µ–º –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
                if (registration.active) {
                    log('Service Worker —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω');
                } else {
                    registration.addEventListener('updatefound', () => {
                        const installingWorker = registration.installing;
                        installingWorker.addEventListener('statechange', () => {
                            if (installingWorker.state === 'activated') {
                                log('Service Worker –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω');
                            }
                        });
                    });
                }
                
                return registration;
            } catch (error) {
                showStatus('sw-status', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                log(`–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker: ${error.message}`);
            }
        }

        // 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
        async function subscribe() {
            log('–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è...');
            
            try {
                if (!registration) {
                    await registerServiceWorker();
                }
                
                // –ü–æ–ª—É—á–∞–µ–º VAPID –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
                const response = await fetch('/api/push/vapid-public-key');
                const { publicKey } = await response.json();
                
                if (!publicKey) {
                    throw new Error('VAPID –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
                
                subscription = await registration.pushManager.subscribe({
                    userVisibleOnly: true,
                    applicationServerKey: urlBase64ToUint8Array(publicKey)
                });
                
                showStatus('subscription-status', '‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞', 'success');
                log(`–ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞: ${subscription.endpoint}`);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–¥–ª—è –¥–µ–º–æ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º)
                log('–ü–æ–¥–ø–∏—Å–∫–∞ –≥–æ—Ç–æ–≤–∞ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä');
                
                return subscription;
            } catch (error) {
                showStatus('subscription-status', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                log(`–û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏: ${error.message}`);
            }
        }

        async function unsubscribe() {
            log('–û—Ç–ø–∏—Å–∫–∞ –æ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π...');
            
            try {
                if (!subscription) {
                    subscription = await registration.pushManager.getSubscription();
                }
                
                if (!subscription) {
                    showStatus('subscription-status', '‚ö†Ô∏è –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏', 'warning');
                    log('–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏');
                    return;
                }
                
                const result = await subscription.unsubscribe();
                
                if (result) {
                    showStatus('subscription-status', '‚úÖ –û—Ç–ø–∏—Å–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞', 'success');
                    log('–û—Ç–ø–∏—Å–∫–∞ –æ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∞');
                    subscription = null;
                } else {
                    showStatus('subscription-status', '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø–∏—Å–∫–∏', 'error');
                    log('–û—à–∏–±–∫–∞ –æ—Ç–ø–∏—Å–∫–∏ –æ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π');
                }
                
                return result;
            } catch (error) {
                showStatus('subscription-status', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                log(`–û—à–∏–±–∫–∞ –æ—Ç–ø–∏—Å–∫–∏: ${error.message}`);
            }
        }

        async function checkSubscription() {
            log('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏...');
            
            try {
                if (!registration) {
                    await registerServiceWorker();
                }
                
                subscription = await registration.pushManager.getSubscription();
                
                if (subscription) {
                    showStatus('subscription-status', '‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–∞', 'success');
                    log(`–ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞: ${subscription.endpoint}`);
                } else {
                    showStatus('subscription-status', '‚ö†Ô∏è –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏', 'warning');
                    log('–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏');
                }
                
                return subscription;
            } catch (error) {
                showStatus('subscription-status', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                log(`–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏: ${error.message}`);
            }
        }

        // 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        async function sendTestNotification() {
            log('–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è...');
            
            try {
                const response = await fetch('/api/push/send', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        sendToAll: true,
                        notification: {
                            title: '–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ',
                            body: '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç –∫–ª–∞—Å—Å–Ω–æ–≥–æ —Å–∞–π—Ç–∞',
                            icon: '/logo.svg',
                            data: {
                                type: 'test',
                                timestamp: new Date().toISOString()
                            }
                        }
                    })
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showStatus('notification-status', 
                        `‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (–£—Å–ø–µ—à–Ω–æ: ${result.sent}, –û—à–∏–±–∫–∏: ${result.failed})`, 
                        'success');
                    log(`–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${JSON.stringify(result)}`);
                } else {
                    showStatus('notification-status', `‚ùå –û—à–∏–±–∫–∞: ${result.error}`, 'error');
                    log(`–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ${result.error}`);
                }
            } catch (error) {
                showStatus('notification-status', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                log(`–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ${error.message}`);
            }
        }

        async function sendCustomNotification() {
            const title = prompt('–ó–∞–≥–æ–ª–æ–≤–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', '–ö–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ');
            if (!title) return;
            
            const body = prompt('–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', '–≠—Ç–æ –≤–∞—à–µ –∫–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ');
            if (!body) return;
            
            log(`–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ${title}`);
            
            try {
                const response = await fetch('/api/push/send', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        sendToAll: true,
                        notification: {
                            title,
                            body,
                            icon: '/logo.svg',
                            data: {
                                type: 'custom',
                                timestamp: new Date().toISOString()
                            }
                        }
                    })
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showStatus('notification-status', 
                        `‚úÖ –ö–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (–£—Å–ø–µ—à–Ω–æ: ${result.sent}, –û—à–∏–±–∫–∏: ${result.failed})`, 
                        'success');
                    log(`–ö–∞—Å—Ç–æ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${JSON.stringify(result)}`);
                } else {
                    showStatus('notification-status', `‚ùå –û—à–∏–±–∫–∞: ${result.error}`, 'error');
                    log(`–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ${result.error}`);
                }
            } catch (error) {
                showStatus('notification-status', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                log(`–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: ${error.message}`);
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function urlBase64ToUint8Array(base64String) {
            const padding = '='.repeat((4 - base64String.length % 4) % 4);
            const base64 = (base64String + padding)
                .replace(/-/g, '+')
                .replace(/_/g, '/');

            const rawData = window.atob(base64);
            const outputArray = new Uint8Array(rawData.length);

            for (let i = 0; i < rawData.length; ++i) {
                outputArray[i] = rawData.charCodeAt(i);
            }

            return outputArray;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            checkSupport();
        });
    </script>
</body>
</html>